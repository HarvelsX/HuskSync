dependencies {
    implementation 'redis.clients:jedis:3.7.0'
    implementation 'com.zaxxer:HikariCP:5.0.0'
    compileOnly 'com.google.guava:guava:21.0'
}

import org.apache.tools.ant.filters.ReplaceTokens
task updateVersion(type: Copy) {
    from('src/main/resources') {
        include 'plugin.yml'
        include 'bungee.yml'
    }
    into 'build/sources/resources/'
    filter(ReplaceTokens, tokens: [version: '' + project.version])
}

processResources {
    duplicatesStrategy = DuplicatesStrategy.INCLUDE
    dependsOn updateVersion
    from 'build/sources/resources'
}

shadowJar {
    dependsOn processResources

    // Exclude some unnecessary files
    exclude "**/module-info.class"
    exclude "module-info.class"
}